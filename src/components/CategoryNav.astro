---
import type { Header } from '../lib/content';

export interface Props {
  headers: Header[];
  postCounts: Record<string, number>;
}

const { headers = [], postCounts = {} } = Astro.props;
---

<nav class="space-y-6">
  <h2 class="text-sm font-semibold text-zinc-900 dark:text-zinc-100">
    Browse by Category
  </h2>

  {headers.map((header) => (
    <div class="space-y-3">
      <h3 class="text-xs font-medium uppercase tracking-wide text-zinc-500 dark:text-zinc-400 flex items-center gap-1.5">
        {header.icon && header.icon.startsWith('/') ? (
          <img src={header.icon} alt="" width="14" height="14" class="inline-block" />
        ) : header.icon ? (
          <span>{header.icon}</span>
        ) : null}
        {header.name}
      </h3>
      <ul class="space-y-2">
        {header.categories.map((category) => {
          const count = postCounts[category.slug] || 0;
          return (
            <li>
              <a
                href={`/articles/${category.slug}`}
                class="group flex items-center justify-between rounded-lg px-3 py-2 text-sm text-zinc-600 transition hover:bg-zinc-100 dark:text-zinc-400 dark:hover:bg-zinc-800/50"
              >
                <span class="flex items-center gap-1.5 group-hover:text-sky-500 dark:group-hover:text-sky-400">
                  {category.icon && category.icon.startsWith('/') ? (
                    <img src={category.icon} alt="" width="14" height="14" class="inline-block" />
                  ) : category.icon ? (
                    <span>{category.icon}</span>
                  ) : null}
                  {category.name}
                </span>
                {count > 0 && (
                  <span class="rounded-full bg-zinc-100 px-2 py-0.5 text-xs text-zinc-500 dark:bg-zinc-800 dark:text-zinc-400">
                    {count}
                  </span>
                )}
              </a>
            </li>
          );
        })}
      </ul>
    </div>
  ))}
</nav>
